generator client {
  provider = "prisma-client-js"
}
generator zod {
  provider = "zod-prisma-types"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String        @id
  name         String?
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  integrations Integration[]
}

enum IntegrationType {
  GMAIL
  SLACK
  OUTLOOK
  GITHUB
  GOOGLE_CALENDAR
}

enum IntegrationStatus {
  ACTIVE
  REVOKED
  EXPIRED
}


model Integration {
  id              String            @id @default(uuid())
  userId          String
  type            IntegrationType
  providerUserId  String?
  accessToken     String
  refreshToken    String?
  tokenExpiration DateTime
  watchExpiration DateTime?
  scopes          String[]
  createdAt       DateTime          @default(now())
  lastUsedAt      DateTime?
  lastRefreshedAt DateTime?
  status          IntegrationStatus @default(ACTIVE)
  metadata        Json?
  user            User              @relation(fields: [userId], references: [id])
}

